<!DOCTYPE html>
<html lang="te">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Aquaculture A‚ÄìZ ‚Ä¢ Aerator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config={darkMode:'class',theme:{extend:{boxShadow:{soft:'0 12px 28px rgba(2,6,23,.08)'}}}}
  </script>
  <style>
    html{scroll-behavior:smooth}
    body{background:linear-gradient(135deg,#dbeafe 0%,#e0f2fe 50%,#f0fdf4 100%)}
    .dark body{background:linear-gradient(135deg,#0f172a 0%,#082f49 50%,#14532d 100%)}
    .navbtn{border:1px solid rgb(226,232,240);padding:.55rem .9rem;border-radius:.75rem;background:#fff;text-align:center;font-weight:700;font-size:1rem;white-space:nowrap;}
    @media (min-width:640px){ .navbtn{font-size:.95rem;padding:.6rem 1rem} }
    .dark .navbtn{background:#0b1220;border-color:#1f2937}
    .chat-btn { position: fixed; right: 16px; bottom: 78px; width: 56px; height: 56px; border-radius: 50%; background: #0b6b6b; color: #fff; display: flex; align-items: center; justify-content: center; box-shadow: 0 6px 18px rgba(11,107,107,0.18); border: none; z-index: 1000; font-size: 20px; }
    .chat-panel { position: fixed; right: 14px; bottom: 148px; width: 92%; max-width: 360px; height: 56vh; max-height: 520px; background: #fff; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.12); display: none; flex-direction: column; overflow: hidden; z-index: 1000; }
    .chat-panel.open { display: flex; }
    .chat-header { padding: 12px; border-bottom: 1px solid #eee; display:flex;align-items:center;justify-content:space-between; }
    .chat-title { font-weight:600; font-size:15px; color:#0b5b5b; }
    .chat-messages { flex:1; padding:12px; overflow:auto; display:flex;flex-direction:column; gap:8px; background:#fbfbfb; }
    .msg { max-width:78%; padding:8px 10px; border-radius:10px; font-size:14px; }
    .msg.user { align-self:flex-end; background:#0b6b6b; color:#fff; border-bottom-right-radius:4px; }
    .msg.bot { align-self:flex-start; background:#fff; color:#111; border:1px solid #eee; }
    .reply-en { font-weight:700; margin-bottom:4px; }
    .reply-te { color:#475569; font-size:13px; opacity:0.95; }
    .chat-input { display:flex; gap:8px; padding:10px; border-top:1px solid #eee; }
    .chat-input input { flex:1;padding:10px 12px;border:1px solid #ddd;border-radius:8px;font-size:14px }
    .chat-input button { padding:10px 12px;border-radius:8px;border:none;background:#0b6b6b;color:#fff;font-weight:600 }
    @media(max-width:420px){ .chat-panel{right:8px;left:8px;max-width:none} }
  </style>
</head>
<body class="text-slate-900 dark:text-slate-100">
  <header class="sticky top-0 z-30 backdrop-blur bg-white/80 dark:bg-slate-950/70 border-b border-slate-200 dark:border-slate-800">
    <div class="max-w-7xl mx-auto px-4 py-3 flex items-center">
      <div class="h-9 w-9 mr-1 relative">
        <img src="assets/logo.png" alt="Logo" class="h-9 w-9 object-contain block dark:hidden">
        <img src="assets/logo-dark.png" alt="Logo" class="h-9 w-9 object-contain hidden dark:block">
      </div>
      <h1 class="text-xl font-bold hidden sm:inline">Aquaculture A‚ÄìZ</h1>
      <nav class="hidden sm:flex gap-2 flex-1 justify-center">
        <a href="index.html" class="navbtn">üè† <span data-i18n="m_home">Home</span></a>
        <a href="aerator.html" class="navbtn">‚öôÔ∏è <span data-i18n="m_aerator">Aerator</span></a>
        <a href="history.html" class="navbtn">üìú <span data-i18n="m_history">History</span></a>
      </nav>
      <div class="flex items-center gap-2 flex-none">
        <label for="langSel" class="text-sm text-slate-600 dark:text-slate-300 select-none">Ln</label>
        <select id="langSel" class="text-sm border rounded-md px-2 py-1 dark:bg-slate-900 dark:border-slate-700">
          <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
          <option value="en">English</option>
        </select>
        <button id="themeToggle" class="rounded-full px-3 py-1.5 text-sm border border-slate-200 dark:border-slate-800">üåô/‚òÄÔ∏è</button>
      </div>
    </div>
  </header>

  <main class="max-w-7xl mx-auto p-3 sm:p-4 space-y-4 pb-36 sm:pb-4">
    <!-- Full Aerator Module -->
    <section id="aerator" class="rounded-2xl p-4 bg-white dark:bg-slate-900 shadow-soft border border-slate-200/60 dark:border-slate-800">
      <div class="flex items-start justify-between gap-3">
        <div>
          <h3 class="font-semibold text-lg">‚öôÔ∏è <span data-i18n="m_aerator">Aerator</span></h3>
          <p class="mt-2 text-sm text-slate-600 dark:text-slate-300" data-i18n="aerator_desc">
            ‡∞é‡∞∞‡±á‡∞ü‡∞∞‡±ç‡∞≤‡±Å ‡∞ö‡±Ü‡∞∞‡±Å‡∞µ‡±Å‡∞≤ ‡∞Ü‡∞ï‡±ç‡∞∏‡∞ø‡∞ú‡∞®‡±ç ‡∞∏‡±ç‡∞•‡∞æ‡∞Ø‡∞ø‡∞≤‡∞®‡±Å ‡∞®‡∞ø‡∞≤‡±Å‡∞™‡±Å‡∞ï‡±ã‡∞µ‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞∏‡∞π‡∞æ‡∞Ø‡∞™‡∞°‡∞§‡∞æ‡∞Ø‡∞ø ‚Äî ‡∞Æ‡±ã‡∞°‡∞≤‡±ç, ‡∞∂‡∞ï‡±ç‡∞§‡∞ø, ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞®‡∞ø‡∞∞‡±ç‡∞µ‡∞π‡∞£ ‡∞∏‡±Ç‡∞ö‡∞®‡∞≤‡±Å ‡∞á‡∞µ‡±ç‡∞µ‡∞¨‡∞°‡±ç‡∞°‡∞æ‡∞Ø‡∞ø.
          </p>
        </div>
      </div>

      <!-- Calculator + Models grid -->
      <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- Calculator card -->
        <div class="rounded-xl p-4 bg-slate-50 dark:bg-slate-800/40 border border-slate-100 dark:border-slate-800">
          <h4 class="font-semibold mb-2" data-i18n="calc_title">Aerator Calculator</h4>

          <label class="text-xs font-medium" for="pondArea" data-i18n="calc_area_label">Pond area (m¬≤)</label>
          <input id="pondArea" type="number" min="1" step="0.1" placeholder="eg. 1000" class="mt-1 w-full rounded-md border px-3 py-2 dark:bg-slate-900" />

          <label class="text-xs font-medium mt-3 block" for="pondDepth" data-i18n="calc_depth_label">Average depth (m)</label>
          <input id="pondDepth" type="number" min="0.1" step="0.1" placeholder="eg. 1.2" class="mt-1 w-full rounded-md border px-3 py-2 dark:bg-slate-900" />

          <div class="mt-3 flex items-center gap-2">
            <button id="calcBtn" class="navbtn flex-1" data-i18n="calc_btn">Calculate</button>
            <button id="calcReset" class="navbtn bg-white/60 border-slate-200 dark:bg-transparent" aria-label="Reset">Reset</button>
          </div>

          <div id="calcResult" class="mt-3 text-sm text-slate-700 dark:text-slate-200 hidden" aria-live="polite"></div>
          <p class="mt-3 text-xs text-slate-500" data-i18n="calc_note">Note: This is an estimate; consult product specs for exact selection.</p>
        </div>

        <!-- Models / Quick picks -->
        <div class="space-y-3">
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
            <div class="rounded-xl p-3 bg-white dark:bg-slate-900 border border-slate-100 dark:border-slate-800 flex gap-3 items-start">
              <img src="assets/aerator-1.jpg" alt="AquaAir 100" class="h-20 w-20 object-cover rounded-md flex-none">
              <div class="flex-1">
                <div class="flex items-center justify-between">
                  <div>
                    <div class="font-semibold">AquaAir 100</div>
                    <div class="text-xs text-slate-500 mt-1" data-i18n="model_flow">Flow: 2000 L/h ¬∑ Power: 75 W</div>
                  </div>
                  <div class="text-sm font-bold">‚Çπ 8,500</div>
                </div>
                <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Best for small ponds up to 1000 m¬≥.</p>
                <div class="mt-3 flex gap-2">
                  <button class="navbtn btn-request" data-model="AquaAir 100" data-price="8500">Request Quote</button>
                  <button class="navbtn bg-white/60 btn-specs" data-specs='{"flow":"2000 L/h","power":"75W"}'>Specs</button>
                </div>
              </div>
            </div>

            <div class="rounded-xl p-3 bg-white dark:bg-slate-900 border border-slate-100 dark:border-slate-800 flex gap-3 items-start">
              <img src="assets/aerator-2.jpg" alt="ProOxy 300" class="h-20 w-20 object-cover rounded-md flex-none">
              <div class="flex-1">
                <div class="flex items-center justify-between">
                  <div>
                    <div class="font-semibold">ProOxy 300</div>
                    <div class="text-xs text-slate-500 mt-1" data-i18n="model_flow">Flow: 6000 L/h ¬∑ Power: 180 W</div>
                  </div>
                  <div class="text-sm font-bold">‚Çπ 18,500</div>
                </div>
                <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">For medium ponds or multiple small ponds.</p>
                <div class="mt-3 flex gap-2">
                  <button class="navbtn btn-request" data-model="ProOxy 300" data-price="18500">Request Quote</button>
                  <button class="navbtn bg-white/60 btn-specs" data-specs='{"flow":"6000 L/h","power":"180W"}'>Specs</button>
                </div>
              </div>
            </div>

            <div class="rounded-xl p-3 bg-white dark:bg-slate-900 border border-slate-100 dark:border-slate-800 flex gap-3 items-start">
              <img src="assets/aerator-3.jpg" alt="MaxBub 750" class="h-20 w-20 object-cover rounded-md flex-none">
              <div class="flex-1">
                <div class="flex items-center justify-between">
                  <div>
                    <div class="font-semibold">MaxBub 750</div>
                    <div class="text-xs text-slate-500 mt-1" data-i18n="model_flow">Flow: 15000 L/h ¬∑ Power: 420 W</div>
                  </div>
                  <div class="text-sm font-bold">‚Çπ 42,000</div>
                </div>
                <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Large ponds and commercial farms.</p>
                <div class="mt-3 flex gap-2">
                  <button class="navbtn btn-request" data-model="MaxBub 750" data-price="42000">Request Quote</button>
                  <button class="navbtn bg-white/60 btn-specs" data-specs='{"flow":"15000 L/h","power":"420W"}'>Specs</button>
                </div>
              </div>
            </div>

            <div class="rounded-xl p-3 bg-white dark:bg-slate-900 border border-slate-100 dark:border-slate-800 flex gap-3 items-start">
              <img src="assets/aerator-4.jpg" alt="OldPro 500" class="h-20 w-20 object-cover rounded-md flex-none">
              <div class="flex-1">
                <div class="flex items-center justify-between">
                  <div>
                    <div class="font-semibold">OldPro 500</div>
                    <div class="text-xs text-slate-500 mt-1" data-i18n="model_flow">Flow: 9000 L/h ¬∑ Power: 260 W</div>
                  </div>
                  <div class="text-sm font-bold">‚Çπ 26,500</div>
                </div>
                <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">Reliable and low-maintenance for steady operations.</p>
                <div class="mt-3 flex gap-2">
                  <button class="navbtn btn-request" data-model="OldPro 500" data-price="26500">Request Quote</button>
                  <button class="navbtn bg-white/60 btn-specs" data-specs='{"flow":"9000 L/h","power":"260W"}'>Specs</button>
                </div>
              </div>
            </div>

          </div>

          <!-- FAQs -->
          <div class="rounded-xl p-3 bg-slate-50 dark:bg-slate-800/40 border border-slate-100 dark:border-slate-800">
            <div class="font-semibold" data-i18n="faq_title">FAQs</div>
            <ul class="mt-2 text-sm text-slate-600 dark:text-slate-300 space-y-1">
              <li><strong data-i18n="faq_q1">How often to maintain?</strong> <span data-i18n="faq_a1">Monthly check & cleaning recommended.</span></li>
              <li><strong data-i18n="faq_q2">Power consumption?</strong> <span data-i18n="faq_a2">See model specs ‚Äî typical range 75W‚Äì420W.</span></li>
            </ul>
          </div>

        </div>
      </div>
    </section>
  </main>

  <!-- Bottom nav -->
  <nav class="fixed bottom-0 inset-x-0 bg-white dark:bg-slate-900 border-t border-slate-200 dark:border-slate-700 flex justify-around py-2 z-40 sm:hidden"
       style="padding-bottom: env(safe-area-inset-bottom);">
    <a href="index.html" class="flex flex-col items-center text-base font-semibold"><span>üè†</span><span data-i18n="m_home">Home</span></a>
    <a href="aerator.html" class="flex flex-col items-center text-base font-semibold"><span>‚öôÔ∏è</span><span data-i18n="m_aerator">Aerator</span></a>
    <a href="history.html" class="flex flex-col items-center text-base font-semibold"><span>üïò</span><span data-i18n="m_history">History</span></a>
  </nav>

  <!-- Chat -->
  <button class="chat-btn" id="openChat" aria-label="Open chat">üí¨</button>
  <div class="chat-panel" id="chatPanel" role="dialog" aria-label="Chat with Aqua A-Z">
    <div class="chat-header">
      <div class="chat-title" id="chatTitle" data-i18n="chat_title">Help & Chat</div>
      <button id="closeChat" aria-label="Close chat" style="background:none;border:none;font-size:18px;padding:6px;cursor:pointer">‚úï</button>
    </div>
    <div class="chat-messages" id="chatMessages" aria-live="polite"></div>
    <div class="chat-input" role="form" aria-label="Chat input">
      <input id="chatInput" type="text" placeholder="Type a message..." aria-label="Type a message" />
      <button id="sendBtn" aria-label="Send message">Send</button>
    </div>
  </div>

  <script>
    // helpers & i18n (same as index)
    const $id = s => document.getElementById(s);
    window.dict = window.dict || {
      en:{ m_aerator:"Aerator", m_home:"Home", m_history:"History", chat_title:"Help & Chat", chat_greeting:"Hi! How can I help you today?", chat_placeholder:"Type a message...", chat_open_aria:"Open chat", chat_close_aria:"Close chat", chat_reply_default:"Sorry, I cannot perform that now; but I can help. Please give more details.", chat_reply_aerator:"What details about aerators do you need? Model, capacity, or services?", chat_reply_history:"History: latest updates are managed by site admin and shown here when available.", chat_more_info:"Please type a more detailed message." },
      te:{ m_aerator:"‡∞é‡∞∞‡±á‡∞ü‡∞∞‡±ç", m_home:"‡∞π‡±ã‡∞Æ‡±ç", m_history:"‡∞ö‡∞∞‡∞ø‡∞§‡±ç‡∞∞", chat_title:"‡∞∏‡∞π‡∞æ‡∞Ø‡∞Ç & ‡∞ö‡∞æ‡∞ü‡±ç", chat_greeting:"‡∞π‡∞æ‡∞Ø‡±ç! ‡∞®‡±á‡∞®‡±Å ‡∞à‡∞∞‡±ã‡∞ú‡±Å ‡∞é‡∞≤‡∞æ ‡∞∏‡∞π‡∞æ‡∞Ø‡∞Ç ‡∞ö‡±á‡∞Ø‡∞ó‡∞≤‡∞®‡±Å?", chat_placeholder:"‡∞Æ‡±Ä ‡∞∏‡∞Ç‡∞¶‡±á‡∞∂‡∞Ç ‡∞∞‡∞æ‡∞Ø‡∞Ç‡∞°‡∞ø...", chat_open_aria:"‡∞ö‡∞æ‡∞ü‡±ç ‡∞ì‡∞™‡±Ü‡∞®‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø", chat_close_aria:"‡∞ö‡∞æ‡∞ü‡±ç ‡∞Æ‡±Ç‡∞∏‡∞ø‡∞µ‡±á‡∞Ø‡∞Ç‡∞°‡∞ø", chat_reply_default:"‡∞ï‡±ç‡∞∑‡∞Æ‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø, ‡∞®‡±á‡∞®‡±Å ‡∞¶‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞á‡∞™‡±ç‡∞™‡±Å‡∞°‡±á ‡∞Ö‡∞Æ‡∞≤‡±Å ‡∞ö‡±á‡∞Ø‡∞≤‡±á‡∞®‡±Å; ‡∞ï‡∞æ‡∞®‡±Ä ‡∞®‡±á‡∞®‡±Å ‡∞∏‡∞π‡∞æ‡∞Ø‡∞™‡∞°‡∞ó‡∞≤‡∞®‡±Å. ‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø ‡∞Æ‡∞∞‡∞ø‡∞®‡±ç‡∞®‡∞ø ‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡±Å ‡∞á‡∞µ‡±ç‡∞µ‡∞Ç‡∞°‡∞ø.", chat_reply_aerator:"‡∞é‡∞∞‡±á‡∞ü‡∞∞‡±ç‡∞≤ ‡∞ó‡±Å‡∞∞‡∞ø‡∞Ç‡∞ö‡∞ø ‡∞Æ‡±Ä‡∞∞‡±Å ‡∞è‡∞Æ‡∞ø ‡∞§‡±Ü‡∞≤‡±Å‡∞∏‡±Å‡∞ï‡±ã‡∞µ‡∞æ‡∞≤‡∞®‡±Å‡∞ï‡±Å‡∞Ç‡∞ü‡±Å‡∞®‡±ç‡∞®‡∞æ‡∞∞‡±Å? ‡∞Æ‡±ã‡∞°‡∞≤‡±ç, ‡∞∏‡∞æ‡∞Æ‡∞∞‡±ç‡∞•‡±ç‡∞Ø‡∞Ç ‡∞≤‡±á‡∞¶‡∞æ ‡∞∏‡±á‡∞µ‡∞≤‡±Å?", chat_reply_history:"‡∞ö‡∞∞‡∞ø‡∞§‡±ç‡∞∞: ‡∞§‡∞æ‡∞ú‡∞æ ‡∞Ö‡∞™‡±ç‚Äå‡∞°‡±á‡∞ü‡±ç‡∞∏‡±ç ‡∞∏‡±à‡∞ü‡±ç ‡∞Ö‡∞°‡±ç‡∞Æ‡∞ø‡∞®‡±ç ‡∞¶‡±ç‡∞µ‡∞æ‡∞∞‡∞æ ‡∞®‡∞ø‡∞∞‡±ç‡∞µ‡∞π‡∞ø‡∞Ç‡∞™‡∞¨‡∞°‡∞ø ‡∞á‡∞ï‡±ç‡∞ï‡∞° ‡∞ö‡±Ç‡∞™‡∞¨‡∞°‡∞§‡∞æ‡∞Ø‡∞ø.", chat_more_info:"‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø ‡∞Æ‡±Ä ‡∞∏‡∞Ç‡∞¶‡±á‡∞∂‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞µ‡∞ø‡∞µ‡∞∞‡∞Ç‡∞ó‡∞æ ‡∞ü‡±à‡∞™‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø." }
    };

    function applyI18n(){
      const lang=localStorage.getItem('lang')||'te';
      document.documentElement.lang=lang;
      document.querySelectorAll('[data-i18n]').forEach(el=>{const k=el.dataset.i18n; if(window.dict[lang] && window.dict[lang][k]) el.textContent = window.dict[lang][k];});
      if($id('chatInput')) $id('chatInput').placeholder = window.dict[localStorage.getItem('lang')||'te'].chat_placeholder || '';
      if($id('openChat')) $id('openChat').setAttribute('aria-label', window.dict[localStorage.getItem('lang')||'te'].chat_open_aria || '');
      if($id('chatTitle')) $id('chatTitle').textContent = window.dict[localStorage.getItem('lang')||'te'].chat_title || '';
    }

    function escapeHtml(str){return (str||'').replace(/[&<>"']/g, function(m){return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m];});}
    function appendUserMessage(text){const div=document.createElement('div');div.className='msg user';div.innerText=text; $id('chatMessages').appendChild(div); $id('chatMessages').scrollTop=$id('chatMessages').scrollHeight;}
    function appendBotMessage(en, te){const div=document.createElement('div');div.className='msg bot';div.innerHTML=`<div class="reply-en">${escapeHtml(en)}</div><div class="reply-te">${escapeHtml(te)}</div>`;$id('chatMessages').appendChild(div); $id('chatMessages').scrollTop=$id('chatMessages').scrollHeight;}

    function injectInitialGreeting(){const enGreeting=window.dict.en.chat_greeting||'Hi! How can I help you today?'; const teGreeting=window.dict.te.chat_greeting||'‡∞π‡∞æ‡∞Ø‡±ç! ‡∞®‡±á‡∞®‡±Å ‡∞à‡∞∞‡±ã‡∞ú‡±Å ‡∞é‡∞≤‡∞æ ‡∞∏‡∞π‡∞æ‡∞Ø‡∞Ç ‡∞ö‡±á‡∞Ø‡∞ó‡∞≤‡∞®‡±Å?'; appendBotMessage(enGreeting, teGreeting);}

    function botReply(userText){const t=(userText||'').toLowerCase(); let en=window.dict.en.chat_reply_default, te=window.dict.te.chat_reply_default;
      if(t.includes('aerator')||t.includes('‡∞é‡∞∞‡±á‡∞ü‡∞∞‡±ç')){ en=window.dict.en.chat_reply_aerator; te=window.dict.te.chat_reply_aerator; }
      else if(t.includes('history')||t.includes('‡∞ö‡∞∞‡∞ø‡∞§‡±ç‡∞∞')){ en=window.dict.en.chat_reply_history; te=window.dict.te.chat_reply_history; }
      else if((userText||'').trim().length<3){ en=window.dict.en.chat_more_info; te=window.dict.te.chat_more_info; }
      setTimeout(()=>appendBotMessage(en,te),450);
    }

    // Calculator & buttons JS
    (function(){
      function estimateAerator(area, depth){
        const volume_m3 = (area * depth);
        const liters = volume_m3 * 1000;
        const needed_lph = Math.max(500, Math.round(liters * 0.10));
        const watts = Math.ceil(needed_lph / 25);
        return {volume_m3:+volume_m3.toFixed(2), liters, needed_lph, watts};
      }
      function showCalcResult(obj){
        const el = $id('calcResult'); if(!el) return;
        const en = `Estimated pond: ${obj.volume_m3} m¬≥ (${Math.round(obj.liters).toLocaleString()} L). Recommend ~${obj.needed_lph} L/h (~${obj.watts} W).`;
        const te = `‡∞Ö‡∞Ç‡∞ö‡∞®‡∞æ ‡∞ö‡±Ü‡∞∞‡±Å‡∞µ‡±Å: ${obj.volume_m3} m¬≥ (${Math.round(obj.liters).toLocaleString()} L). ‡∞∏‡±Å‡∞Æ‡∞æ‡∞∞‡±Å ${obj.needed_lph} L/h (~${obj.watts} W) ‡∞Ö‡∞µ‡∞∏‡∞∞‡∞Ç.`;
        el.innerHTML = `<div class="font-medium">${en}</div><div class="text-sm text-slate-600 dark:text-slate-300 mt-1">${te}</div>`;
        el.classList.remove('hidden');
      }
      document.addEventListener('click', function(e){
        const t = e.target;
        if(!t) return;
        if(t && t.id === 'calcBtn'){
          const area = parseFloat($id('pondArea').value) || 0;
          const depth = parseFloat($id('pondDepth').value) || 0;
          if(area <=0 || depth <= 0){ alert('Please enter valid pond area and depth.'); return; }
          const res = estimateAerator(area, depth); showCalcResult(res);
        } else if(t && t.id === 'calcReset'){
          $id('pondArea').value=''; $id('pondDepth').value=''; const el = $id('calcResult'); if(el){ el.classList.add('hidden'); el.innerHTML=''; }
        } else if(t && t.matches && t.matches('.btn-request')){
          const model = t.getAttribute('data-model'); const price = t.getAttribute('data-price');
          const chatBtn = document.getElementById('openChat'); if(chatBtn) chatBtn.click();
          setTimeout(()=>{ const input = document.getElementById('chatInput'); if(input){ const enMsg = `Requesting quote for ${model}${price?(' (‚Çπ'+price+')'):''}. Please assist.`; const teMsg = `‡∞®‡∞æ‡∞ï‡±Å ${model}${price?(' (‚Çπ'+price+')'):''} ‡∞ï‡±ä‡∞∞‡∞ï‡±Å ‡∞ï‡±ã‡∞ü‡±ç ‡∞ï‡∞æ‡∞µ‡∞æ‡∞≤‡∞ø. ‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø ‡∞∏‡∞π‡∞æ‡∞Ø‡∞Ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø.`; input.value = `${enMsg}\n${teMsg}`; input.focus(); } else { alert(`Requesting quote for ${model}${price?(' (‚Çπ'+price+')'):''}`); } }, 300);
        } else if(t && t.matches && t.matches('.btn-specs')){
          const specs = JSON.parse(t.getAttribute('data-specs')||'{}'); const flow = specs.flow||'-', power = specs.power||'-';
          const en = `Specs ‚Äî Flow: ${flow}, Power: ${power}`; const te = `‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡±Å ‚Äî ‡∞´‡±ç‡∞≤‡±ã: ${flow}, ‡∞∂‡∞ï‡±ç‡∞§‡∞ø: ${power}`; alert(`${en}\n\n${te}`);
        }
      });
      window.estimateAerator = estimateAerator;
    })();

    // page init & chat wiring
    document.addEventListener('DOMContentLoaded', ()=>{
      if(!localStorage.getItem('lang')) localStorage.setItem('lang','te');
      applyI18n();
      const saved=localStorage.getItem('theme'); if(saved==='dark'||(!saved&&matchMedia('(prefers-color-scheme: dark)').matches)) document.documentElement.classList.add('dark');
      $id('themeToggle').onclick=()=>{ document.documentElement.classList.toggle('dark'); localStorage.setItem('theme', document.documentElement.classList.contains('dark')?'dark':'light'); };

      // chat
      const openChat = $id('openChat'), chatPanel = $id('chatPanel'), closeChat = $id('closeChat'), sendBtn = $id('sendBtn'), chatInput = $id('chatInput');
      injectInitialGreeting();
      openChat.addEventListener('click', ()=>{ chatPanel.classList.add('open'); applyI18n(); chatInput.focus(); });
      closeChat.addEventListener('click', ()=>{ chatPanel.classList.remove('open'); openChat.focus(); });
      sendBtn.addEventListener('click', ()=>{ const txt=chatInput.value.trim(); if(!txt) return; appendUserMessage(txt); chatInput.value=''; botReply(txt); });
      chatInput.addEventListener('keydown', e=>{ if(e.key==='Enter'){ e.preventDefault(); sendBtn.click(); } });
      document.addEventListener('keydown', e=>{ if(e.key==='Escape' && chatPanel.classList.contains('open')){ chatPanel.classList.remove('open'); openChat.focus(); }});
    });
  </script>
</body>
</html>
